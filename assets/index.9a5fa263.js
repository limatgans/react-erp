var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,a,m)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[a]=m,i=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&s(e,a,t[a]);if(m)for(var a of m(t))n.call(t,a)&&s(e,a,t[a]);return e},r=(e,m)=>t(e,a(m));import{r as l,R as p,a as d}from"./vendor.0011eed7.js";const c=[{id:1,image:"https://randomuser.me/api/portraits/women/90.jpg",name:"Lisa Simpson",email:"lissimp@email.com",position:1,phone:"555-321-2345"},{id:2,image:"https://randomuser.me/api/portraits/men/90.jpg",name:"Troy McGibbons",email:"troydog@email.com",position:2,phone:"555-012-3456"},{id:3,image:"https://randomuser.me/api/portraits/women/77.jpg",name:"Sandra Lopez",email:"salola@email.com",position:3,phone:"555-456-7890"},{id:4,image:"https://randomuser.me/api/portraits/men/35.jpg",name:"Tyler Durden",email:"projectmayhem@email.com",position:4,phone:"555-654-9876"},{id:5,image:"https://randomuser.me/api/portraits/women/51.jpg",name:"Kristen Stewart",email:"kikip@email.com",position:5,phone:"555-987-9876"},{id:6,image:"https://randomuser.me/api/portraits/men/48.jpg",name:"Ray Romano",email:"royro@email.com",position:6,phone:"555-435-6748"},{id:7,image:"https://randomuser.me/api/portraits/women/66.jpg",name:"Brenda Walsh",email:"90210@email.com",position:6,phone:"555-666-7766"},{id:8,image:"https://randomuser.me/api/portraits/men/25.jpg",name:"Booth Horvath",position:7,email:"booboo@email.com",phone:"555-223-4334"},{id:9,image:"https://randomuser.me/api/portraits/women/44.jpg",name:"Jessa Robinson",email:"jezebelish@email.com",position:8,phone:"555-451-9974"},{id:10,image:"https://randomuser.me/api/portraits/men/99.jpg",name:"Ira Glass",email:"tal@email.com",position:9,phone:"555-111-3322"},{id:11,image:"https://randomuser.me/api/portraits/women/87.jpg",name:"Andrea Russo",email:"russ@email.com",position:10,phone:"555-110-1110"},{id:12,image:"https://randomuser.me/api/portraits/men/45.jpg",name:"Charles Barkley",email:"charles@email.com",position:11,phone:"555-001-0001"},{id:13,image:"https://randomuser.me/api/portraits/women/39.jpg",name:"Diana Cheddar",position:12,email:"didi@email.com",phone:"555-200-0002"},{id:14,image:"https://randomuser.me/api/portraits/men/12.jpg",name:"Emerson Downing",position:13,email:"eme@email.com",phone:"555-201-1002"},{id:15,image:"https://randomuser.me/api/portraits/women/12.jpg",name:"Frances Robinson",position:14,email:"fran@email.com",phone:"555-300-1003"},{id:16,image:"https://randomuser.me/api/portraits/men/23.jpg",name:"Gabriel Rodriguez",position:12,email:"gabbagabba@email.com",phone:"555-301-1020"},{id:17,image:"https://randomuser.me/api/portraits/women/23.jpg",name:"Hannah Montana",position:13,email:"bananarama@email.com",phone:"555-333-1020"},{id:18,image:"https://randomuser.me/api/portraits/men/44.jpg",name:"Michael Scott",position:14,email:"thatswhatshesaid@email.com",phone:"555-633-1020"},{id:19,image:"https://randomuser.me/api/portraits/women/42.jpg",name:"Nancy Fey",position:7,email:"nanana@email.com",phone:"555-777-1020"},{id:20,image:"https://randomuser.me/api/portraits/men/3.jpg",name:"Oscar Schindler",position:8,email:"oscar@email.com",phone:"555-777-7000"},{id:21,image:"https://randomuser.me/api/portraits/women/3.jpg",name:"Petula Morrison",position:9,email:"petulia@email.com",phone:"555-666-7000"},{id:22,image:"https://randomuser.me/api/portraits/men/91.jpg",name:"Quinn Sanders",position:10,email:"quinnylover@email.com",phone:"555-666-8888"},{id:23,image:"https://randomuser.me/api/portraits/women/91.jpg",name:"Ursula Peterson",position:11,email:"ur@email.com",phone:"555-123-8888"},{id:24,image:"https://randomuser.me/api/portraits/men/75.jpg",name:"Victor Hugo",position:5,email:"hugs@email.com",phone:"555-666-1234"},{id:25,image:"https://randomuser.me/api/portraits/women/75.jpg",name:"Wanda Sikes",position:6,email:"sike@email.com",phone:"555-678-4000"},{id:26,image:"https://randomuser.me/api/portraits/men/32.jpg",name:"Xavier Burns",position:15,email:"xman@email.com",phone:"555-321-3456"},{id:27,image:"https://randomuser.me/api/portraits/women/54.jpg",name:"Yolanda Rivera",email:"yolo@email.com",position:16,phone:"555-765-1234"},{id:28,image:"https://randomuser.me/api/portraits/men/54.jpg",name:"Zach Morris",position:14,email:"zakattack@email.com",phone:"555-800-8877"}],u=[{id:1,name:"CEO",reportsTo:0,hasTeams:!1},{id:2,name:"Head of staff/HR",reportsTo:1,hasTeams:!0},{id:3,name:"Head of engineering",reportsTo:1,hasTeams:!0},{id:4,name:"Head of design",reportsTo:1,hasTeams:!0},{id:5,name:"Lead Designer",reportsTo:4,hasTeams:!1},{id:6,name:"UI Designer",reportsTo:4,hasTeams:!1},{id:7,name:"Lead Engineer",reportsTo:3,hasTeams:!1},{id:8,name:"Backend Engineer",reportsTo:3,hasTeams:!1},{id:9,name:"Database Engineer",reportsTo:3,hasTeams:!1},{id:10,name:"Frontend Engineer",reportsTo:3,hasTeams:!1},{id:11,name:"React Engineer",reportsTo:3,hasTeams:!1},{id:12,name:"Lead HR",reportsTo:2,hasTeams:!1},{id:13,name:"Recuriter",reportsTo:2,hasTeams:!1},{id:14,name:"HR Intern",reportsTo:2,hasTeams:!1},{id:15,name:"UI Intern",reportsTo:4,hasTeams:!1},{id:16,name:"UI / UX Designer",reportsTo:4,hasTeams:!1}],h=[{id:1,name:"DesignTeam2",members:[24,25,26,27],reportsTo:4},{id:2,name:"DesignTeam1",members:[5,6,7],reportsTo:4},{id:3,name:"HRTeam1",members:[13,14,15],reportsTo:2},{id:4,name:"HRTeam2",members:[16,17,18,28],reportsTo:2},{id:5,name:"DevTeam1",members:[8,9,10,11,12],reportsTo:3},{id:6,name:"DevTeam2",members:[19,20,21,22,23],reportsTo:3}];function g({visible:e,empId:t,getTeamsForEmp:a,moveEmployee:m,closeModal:o}){var n;const s=a(t);if(!s.status)return alert(s.msg),void o();const i=s.data,[r,d]=l.exports.useState(null==(n=i[0])?void 0:n.id);return p.createElement(p.Fragment,null,e&&p.createElement("div",{className:"modal"},p.createElement("div",{className:"modal-content"},p.createElement("div",{className:"modal-header"},p.createElement("h4",{className:"modal-title"},"Move Team Member")),p.createElement("div",{className:"modal-body"},p.createElement("div",null,"New team :"," ",p.createElement("select",{onChange:e=>{d(e.target.value)},placeholder:"Select a new team"},i.map((e=>p.createElement("option",{key:e.id,value:e.id},e.name)))))),p.createElement("div",{className:"modal-footer"},p.createElement("button",{onClick:e=>{const a=m({teamId:r,empId:t});alert(a.msg)}},"Move"),p.createElement("button",{onClick:o},"Close")))))}function E({id:e,name:t,email:a,phone:m,position:o,removeEmployee:n,editEmployee:s,promoteEmployee:i,getTeamsForEmp:r,moveEmployee:d}){const[c,u]=l.exports.useState(!1),[h,E]=l.exports.useState(t),[y,f]=l.exports.useState(a),[v,b]=l.exports.useState(m),[T,I]=l.exports.useState(o),[j,w]=l.exports.useState(!1);return p.createElement(p.Fragment,null,p.createElement("div",{className:"employeeCard"},c?p.createElement(p.Fragment,null,p.createElement("input",{className:"width-1em employeeItems",type:"text",value:h,onChange:e=>(e=>{E(e.target.value)})(e)}),p.createElement("p",{className:"width-1em employeeItems"},T),p.createElement("input",{className:"width-1em employeeItems",type:"text",value:y,onChange:e=>(e=>{f(e.target.value)})(e)}),p.createElement("input",{className:"width-1em employeeItems",type:"text",value:v,onChange:e=>(e=>{b(e.target.value)})(e)}),p.createElement("button",{className:"employeeItems",onClick:()=>h&&y&&v?(e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e))(a)?(s({name:h,email:y,phone:v}),void u(!1)):alert("Invalid Email"):alert("Please fill all details")},"SAVE"),p.createElement("button",{className:"employeeItems",onClick:e=>{u(!1)}},"CANCEL")):p.createElement(p.Fragment,null,p.createElement("p",{className:"width-1em employeeItems"},h),p.createElement("p",{className:"width-1em employeeItems"},T),p.createElement("p",{className:"width-1em employeeItems"},y),p.createElement("p",{className:"width-1em employeeItems"},v),p.createElement("button",{className:"employeeItems",onClick:()=>{u(!0)}},"EDIT"),p.createElement("button",{className:"employeeItems",onClick:t=>{alert(i(e).msg)}},"PROMOTE"),p.createElement("button",{className:"employeeItems",onClick:t=>{const a=n(e);alert(a.msg)}},"REMOVE"),p.createElement("button",{className:"employeeItems",onClick:e=>{w(!0)}},"MOVE"))),p.createElement(g,{visible:j,closeModal:e=>{w(!1)},moveEmployee:d,empId:e,getTeamsForEmp:r}))}function y(e){var t;const{visible:a,closeModal:m,addEmployee:o,teamId:n,getPositionsForTeam:s}=e,[i,r]=l.exports.useState(""),[d,c]=l.exports.useState(""),[u,h]=l.exports.useState(""),g=s(n);if(!g.status)return alert(g.msg);const[E,y]=l.exports.useState(g.data),[f,v]=l.exports.useState(null==(t=E[0])?void 0:t.id);return p.createElement(p.Fragment,null,a&&p.createElement("div",{className:"modal"},p.createElement("div",{className:"modal-content"},p.createElement("div",{className:"modal-header"},p.createElement("h4",{className:"modal-title"},"Add Team Member")),p.createElement("div",{className:"modal-body"},p.createElement("div",null,"Name :"," ",p.createElement("input",{type:"text",value:i,onChange:e=>{r(e.target.value)},placeholder:"Enter Name here"})),p.createElement("div",null,"Email :"," ",p.createElement("input",{type:"text",value:d,onChange:e=>{c(e.target.value)},placeholder:"Enter Email here"})),p.createElement("div",null,"Phone :"," ",p.createElement("input",{type:"text",value:u,onChange:e=>{h(e.target.value)},placeholder:"Enter Phone here"})),p.createElement("div",null,"Position :"," ",p.createElement("select",{onChange:e=>{v(e.target.value)},placeholder:"Select a position"},E.map((e=>p.createElement("option",{key:e.id,value:e.id},e.name)))))),p.createElement("div",{className:"modal-footer"},p.createElement("button",{onClick:e=>{var t;if(!i||!d||!u)return void alert("Please fill all details");const a=o({name:i,email:d,phone:u,teamId:n,position:f});alert(a.msg),a.status&&(r(""),h(""),v(null==(t=E[0])?void 0:t.id),c(""),m())}},"Save"),p.createElement("button",{onClick:m},"Close")))))}function f({data:e,addEmployee:t,removeEmployee:a,editEmployee:m,promoteEmployee:o,getPositionsForTeam:n,getTeamsForEmp:s,moveEmployee:i}){const{id:r,name:d,members:c}=e,[u,h]=l.exports.useState(!1);return p.createElement(p.Fragment,null,p.createElement("h3",null,d),p.createElement("button",{onClick:e=>h(!0)},"Add a New Team Member"),c.map((e=>p.createElement(E,{key:e.id,id:e.id,name:e.name,position:e.position,email:e.email,phone:e.phone,removeEmployee:a,editEmployee:m,promoteEmployee:o,getTeamsForEmp:s,moveEmployee:i}))),p.createElement(y,{visible:u,closeModal:e=>{h(!1)},addEmployee:t,teamId:r,getPositionsForTeam:n}))}function v({data:e}){return p.createElement(p.Fragment,null,p.createElement("h3",null,"Employee"))}function b(){const[e,t]=l.exports.useState([]),[a,m]=l.exports.useState([]),[o,n]=l.exports.useState(c),[s,d]=l.exports.useState(u),[g,E]=l.exports.useState(h);l.exports.useEffect((()=>{const e=o.map((e=>{const t=s.find((t=>t.id===e.position));return r(i({},e),{position:t.name})}));t(e);const a=g.map((t=>{const a=t.members.map((t=>e.find((e=>e.id==t))));return r(i({},t),{members:a})}));m(a)}),[o,s,g]);const y=({name:e,phone:t,email:a,position:m,teamId:l})=>{const p=o.find((e=>e.email===a)),d=s.find((e=>e.id===Number(m))),c=g.find((e=>e.id===l));if(p)return{status:!1,msg:"Employee Email Already Exists"};if(!d)return{status:!1,msg:"Invalid Positon"};if(!c)return{status:!1,msg:"Invalid Team Id"};const u=o[o.length-1].id+1,h=g.map((e=>e.id===l?r(i({},e),{members:[...e.members,u]}):e));return n([...o,{id:u,name:e,phone:t,email:a,position:m}]),E(h),{status:!0,msg:"Employee Added Successfully"}},b=e=>{const t=o.findIndex((t=>t.id===e));if(-1===t)return{status:!1,msg:"Employee does not Exists"};const a=g.map((t=>-1!==t.members.findIndex((t=>t===e))?r(i({},t),{members:t.members.filter((t=>t!==e))}):t));return E(a),n(o.filter(((e,a)=>a!==t))),{status:!0,msg:"Employee removed Successfully"}},T=({id:e,name:t,email:a,phone:m,position:s})=>{const l=o.findIndex((t=>t.id===e)),p=o.find((t=>t.id!==e&&t.email===a&&t.phone===m));if(-1===l)return{status:!1,msg:"Employee does not Exists"};if(p)return{status:!1,msg:"An employee already exists with the new email or phone"};const d=o.map(((o,n)=>n===e?r(i({},o),{name:t||o.name,email:a||o.email,phone:m||o.phone,position:s||o.position}):o));return n(d),{status:!0,msg:"Employee Details has been updated Successfully"}},I=e=>{const t=o.find((t=>t.id===e)),a=s.find((e=>e.id===t.position));if(!t||!a)return{status:!1,msg:"Employee Details / Position Details not found"};if(0===a.reportsTo)return{status:!1,msg:`${t.name} cannot be promoted as he is already at the top of position table`};const m=T({id:e,position:a.reportsTo});if(m.status){const t=g.map((t=>-1!==t.members.findIndex((t=>t===e))?r(i({},t),{members:t.members.filter((t=>t!==e))}):t));return E(t),{status:!0,msg:"Employee has been promoted!"}}return m},j=e=>{const t=g.find((t=>t.id===e));if(!t)return{status:!1,msg:"Couldn't fetch Team"};return{status:!0,msg:"Positions fetched",data:s.filter((e=>e.reportsTo===t.reportsTo)).map((e=>({name:e.name,id:e.id})))}},w=e=>{const t=o.find((t=>t.id===e));if(!t)return{status:!1,msg:"Employee Details not found"};const a=s.find((e=>e.id===t.position));if(!a)return{status:!1,msg:"Invalid Positon"};return{status:!0,msg:"Teams fetched",data:g.filter((t=>{const m=o.find((e=>e.id===t.reportsTo));if(m)return m.position===a.reportsTo&&!t.members.includes(e)}))}},N=({teamId:e,empId:t})=>{if(!o.find((e=>e.id===t)))return{status:!1,msg:"Employee Details not found"};const a=g.find((e=>e.members.includes(t))),m=g.find((t=>t.id===e)),n=g.map((e=>e.id===m.id?r(i({},e),{members:[...e.members,t]}):e.id===a.id?r(i({},e),{members:e.members.filter((e=>e!==t))}):e));return E(n),{status:!0,msg:"Employee moved to new team successfully!"}};return p.createElement(p.Fragment,null,p.createElement("div",{className:"App"},p.createElement(v,null),a.map(((e,t)=>p.createElement(f,{key:e.id,data:e,addEmployee:y,removeEmployee:b,editEmployee:T,promoteEmployee:I,getPositionsForTeam:j,getTeamsForEmp:w,moveEmployee:N})))))}d.render(p.createElement(p.StrictMode,null,p.createElement(b,null)),document.getElementById("root"));
